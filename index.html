<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–æ–π SCP-–ê—Ä—Ö–∏–≤</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0 1rem;
      transition: background .3s, color .3s;
    }

    [data-theme="light"] {
      background: #f5f5f5;
      color: #222;
    }

    [data-theme="dark"] {
      background: #222;
      color: #f5f5f5;
    }

    .hidden {
      display: none;
    }

    button {
      margin: .25rem;
      padding: .5rem 1rem;
      cursor: pointer;
    }

    /* –ú–æ–¥–∞–ª–∫–∞ */
    #scp-modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,.6);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #scp-modal .box {
      background: white;
      color: black;
      padding: 1rem;
      border-radius: 4px;
      max-width: 400px;
      width: 90%;
      position: relative;
    }
    #scp-modal .close {
      position: absolute;
      top: .5rem; right: .5rem;
      font-size: 1.2rem;
      cursor: pointer;
    }

    /* –¢–µ–º–∞ —Ç—ë–º–Ω–æ–π –º–æ–¥–∞–ª–∫–∏ */
    [data-theme="dark"] #scp-modal .box {
      background: #333;
      color: #eee;
    }

    /* –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã */
    #theme-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
    }
  </style>
</head>
<body data-theme="light">

  <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã -->
  <button id="theme-toggle">üåô / ‚òÄÔ∏è</button>

  <!-- –ë–ª–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
  <div id="auth" class="hidden"></div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∞—Ä—Ö–∏–≤ (—Å–ø–∏—Å–æ–∫ SCP) -->
  <div id="archive" class="hidden">
    <h1>–°–ø–∏—Å–æ–∫ SCP</h1>
    <div id="scp-list"></div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π SCP -->
  <div id="scp-modal" class="hidden">
    <div class="box">
      <span class="close">√ó</span>
      <h2 class="title"></h2>
      <p class="description"></p>
    </div>
  </div>

  <!-- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π JavaScript -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const IDs = {
      auth: "auth",
      archive: "archive",
      list: "scp-list",
      modal: "scp-modal",
      themeToggle: "theme-toggle"
    };
    let currentUser = null;

    function $(id) { return document.getElementById(id); }
    function show(el) { el && el.classList.remove("hidden"); }
    function hide(el) { el && el.classList.add("hidden"); }

    // 1. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
    function setTheme(t) {
      document.body.dataset.theme = t;
      localStorage.setItem("theme", t);
    }
    function initThemeToggle() {
      const btn = $(IDs.themeToggle);
      const saved = localStorage.getItem("theme");
      setTheme(saved === "dark" ? "dark" : "light");
      btn.addEventListener("click", () => {
        setTheme(document.body.dataset.theme === "dark" ? "light" : "dark");
      });
    }

    // 2. –ü—Ä–∏–º–µ—Ä ¬´–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏¬ª
    function authenticate(user, pass) {
      return user === "admin" && pass === "password"
        ? { name: "Admin", level: 5 }
        : null;
    }
    function handleLogin(e) {
      e.preventDefault();
      const form = e.target;
      const user = authenticate(form.username.value.trim(), form.password.value);
      if (!user) return alert("–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å");
      currentUser = user;
      renderUI();
    }
    function createLoginForm() {
      const form = document.createElement("form");
      form.innerHTML = `
        <label>–õ–æ–≥–∏–Ω: <input name="username" required></label><br>
        <label>–ü–∞—Ä–æ–ª—å: <input type="password" name="password" required></label><br>
        <button>–í–æ–π—Ç–∏</button>
      `;
      form.addEventListener("submit", handleLogin);
      return form;
    }

    // 3. –î–∞–Ω–Ω—ã–µ SCP –∏ —Ä–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞
    function loadSCPList() {
      return [
        { id:1, title:"SCP-001", level:1, desc:"–û–ø–∏—Å–∞–Ω–∏–µ SCP-001" },
        { id:2, title:"SCP-173", level:2, desc:"–û–ø–∏—Å–∞–Ω–∏–µ SCP-173" },
        { id:3, title:"SCP-682", level:5, desc:"–û–ø–∏—Å–∞–Ω–∏–µ SCP-682" },
        { id:4, title:"SCP-999", level:1, desc:"–û–ø–∏—Å–∞–Ω–∏–µ SCP-999" }
      ];
    }
    function renderSCPList() {
      const container = $(IDs.list);
      container.innerHTML = "";
      loadSCPList().forEach(item => {
        const btn = document.createElement("button");
        btn.textContent = item.title;
        btn.disabled = currentUser.level < item.level;
        btn.onclick = () => openModal(item);
        container.appendChild(btn);
      });
    }

    // 4. –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    function openModal(item) {
      const modal = $(IDs.modal);
      modal.querySelector(".title").textContent       = item.title;
      modal.querySelector(".description").textContent = item.desc;
      show(modal);
    }
    function initModal() {
      const modal = $(IDs.modal);
      modal.querySelector(".close").onclick = () => hide(modal);
      modal.addEventListener("click", e => {
        if (e.target === modal) hide(modal);
      });
    }

    // 5. –û—Å–Ω–æ–≤–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    function renderUI() {
      const authBlock = $(IDs.auth);
      const archive   = $(IDs.archive);

      if (!currentUser) {
        hide(archive);
        authBlock.innerHTML = "";
        authBlock.appendChild(createLoginForm());
        show(authBlock);
      } else {
        hide(authBlock);
        show(archive);
        renderSCPList();
      }
    }

    // –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ
    initThemeToggle();
    initModal();
    renderUI();
  });
  </script>

</body>
</html>
