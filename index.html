<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>SCP Foundation</title>
  <style>
    body {
      font-family: Arial;
      background: #111;
      color: #eee;
      padding: 20px;
      transition: background 0.3s, color 0.3s;
    }
    input, select, button, textarea {
      margin: 10px 0;
      padding: 8px;
      width: 100%;
      border-radius: 4px;
      border: none;
    }
    .hidden { display: none; }
    .scp-link {
      display: block;
      margin: 8px 0;
      color: #0ff;
      text-decoration: none;
    }
    .scp-link:hover { text-decoration: underline; }
    #profile {
      margin: 20px 0;
      padding: 10px;
      background: #222;
      border-radius: 6px;
    }
    #admin-panel {
      background: #333;
      padding: 10px;
      border-radius: 6px;
      margin-top: 20px;
    }
    #scp-modal {
      position: fixed;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      background: #222;
      padding: 20px;
      border-radius: 8px;
      width: 80%;
      max-width: 600px;
      display: none;
      z-index: 1000;
    }
    #scp-modal h2 { margin-top: 0; }
    #overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      display: none;
      z-index: 999;
    }
    #theme-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      padding: 0.5rem 1rem;
      background: #444;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
</head>
<body data-theme="dark">

  <button id="theme-toggle">üåô / ‚òÄÔ∏è</button>

  <h1>SCP Foundation Archive</h1>

  <div id="auth">
    <h2>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
    <input type="text" id="login-name" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" />
    <input type="password" id="login-pass" placeholder="–ü–∞—Ä–æ–ª—å" />
    <button onclick="login()">–í–æ–π—Ç–∏</button>
    <button onclick="register()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
  </div>

  <div id="main" class="hidden">
    <div id="profile"></div>

    <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ SCP..." oninput="renderSCPList()" />

    <h2>–ê—Ä—Ö–∏–≤ SCP</h2>
    <div id="scp-list"></div>

    <div id="create-form">
      <h3>–°–æ–∑–¥–∞—Ç—å SCP</h3>
      <input type="text" id="new-id" placeholder="SCP ID" />
      <input type="number" id="new-level" placeholder="–£—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞ (1‚Äì5)" />
      <input type="text" id="new-class" placeholder="–ö–ª–∞—Å—Å –æ–±—ä–µ–∫—Ç–∞" />
      <textarea id="new-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"></textarea>
      <button onclick="createSCP()">–°–æ–∑–¥–∞—Ç—å</button>
    </div>

    <div id="admin-panel" class="hidden">
      <h3>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
      <input type="text" id="target-user" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –≤—ã–¥–∞—á–∏ —Ä–æ–ª–∏" />
      <select id="target-role">
        <option value="–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å">–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å</option>
        <option value="–û5">–û5</option>
      </select>
      <button onclick="assignRole()">–í—ã–¥–∞—Ç—å —Ä–æ–ª—å</button>
    </div>
  </div>

  <div id="overlay" onclick="closeModal()"></div>
  <div id="scp-modal"></div>

  <script>
    let currentUser = null;
    let users = [];
    let scpData = [
      { id: "SCP-096", level: 4, class: "–ï–≤–∫–ª–∏–¥", description: "–°—É—â–µ—Å—Ç–≤–æ, –≤–ø–∞–¥–∞—é—â–µ–µ –≤ —è—Ä–æ—Å—Ç—å –ø—Ä–∏ –≤–∑–≥–ª—è–¥–µ –Ω–∞ –ª–∏—Ü–æ." },
      { id: "SCP-173", level: 2, class: "–ï–≤–∫–ª–∏–¥", description: "–°—Ç–∞—Ç—É—è, —Å–ø–æ—Å–æ–±–Ω–∞—è –¥–≤–∏–≥–∞—Ç—å—Å—è, –∫–æ–≥–¥–∞ –µ—ë –Ω–µ –≤–∏–¥—è—Ç." },
      { id: "SCP-682", level: 5, class: "–ö–µ—Ç–µ—Ä", description: "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ—É–Ω–∏—á—Ç–æ–∂–∞–µ–º–æ–µ —Å—É—â–µ—Å—Ç–≤–æ." }
    ];

    function loadUsers() {
      const saved = localStorage.getItem("scpUsers");
      users = saved ? JSON.parse(saved) : [
        { username: "admin", password: "1234", role: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä", level: 5 },
        { username: "bright", password: "scp", role: "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å", level: 3 }
      ];
    }

    function saveUsers() {
      localStorage.setItem("scpUsers", JSON.stringify(users));
    }

    function login() {
      const name = document.getElementById("login-name").value.trim();
      const pass = document.getElementById("login-pass").value.trim();
      const user = users.find(u => u.username === name && u.password === pass);
      if (!user) return alert("–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ");
      currentUser = user;
      document.getElementById("auth").classList.add("hidden");
      document.getElementById("main").classList.remove("hidden");
      document.getElementById("profile").innerHTML = `<strong>–ü—Ä–æ—Ñ–∏–ª—å:</strong> ${user.username} | –£—Ä–æ–≤–µ–Ω—å: ${user.level} | –†–æ–ª—å: ${user.role}`;
      if (user.role === "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä") document.getElementById("admin-panel").classList.remove("hidden");
      renderSCPList();
    }

    function register() {
      const name = document.getElementById("login-name").value.trim();
      const pass = document.getElementById("login-pass").value.trim();
      if (!name || !pass) return alert("‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ –ø–∞—Ä–æ–ª—å");
      if (users.find(u => u.username === name)) return alert("üö´ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç");
      const newUser = { username: name, password: pass, role: "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å", level: 1 };
      users.push(newUser);
      saveUsers();
      alert("‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –¢–µ–ø–µ—Ä—å –≤–æ–π–¥–∏—Ç–µ.");
    }

    function renderSCPList() {
      const query = document.getElementById("search").value.toLowerCase();
      const list = document.getElementById("scp-list");
      list.innerHTML = "";
      scpData.filter(scp => scp.id.toLowerCase().includes(query)).forEach(scp => {
        const link = document.createElement("a");
        link.className = "scp-link";
        link.href = "#";
        link.textContent = scp.id;
        link.onclick = () => openSCP(scp);
        list.appendChild(link);
      });
    }

    function openSCP(scp) {
      if (currentUser.level < scp.level) {
        alert("‚õî Access Denied: –£—Ä–æ–≤–µ–Ω—å –¥–æ–ø—É—Å–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω.");
        return;
      }
      const modal = document.getElementById("scp-modal");
      modal.innerHTML = `<h2>${scp.id}</h2><p><strong>–ö–ª–∞—Å—Å:</strong> ${scp.class}</p><p>${scp.description}</p><button onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>`;
      document.getElementById("overlay").style.display = "block";
      modal.style.display = "block";
    }

    function closeModal() {
      document.getElementById("overlay").style.display = "none";
      document.getElementById("scp-modal").style.display = "none";
    }

    function createSCP() {
      if (currentUser.level < 3) return alert("‚õî –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è SCP.");
      const id = document.getElementById("new-id").value.trim();
      const level = parseInt(document.getElementById("new-level").value);
      const cls = document.getElementById("new-class").value.trim();
      const desc = document.getElementById("new-desc").value.trim();
      if (!id || !cls || !desc || isNaN(level)) return alert("‚ö†Ô∏è –ó–∞–ø–æ–ª–Ω–∏ –≤—Å–µ –ø–æ–ª—è.");
      if (level > 5) return alert("üö´ –ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å SCP —Å —É—Ä–æ–≤–Ω–µ–º 6 –∏–ª–∏ –≤—ã—à–µ.");
      scpData.push({ id, level, class: cls, description: desc });
      renderSCPList();
    }

    function assignRole() {
